# 前后端对接快速测试指南

## 🚀 快速开始

### 第一步：启动后端服务

```bash
cd zhiyong-backend
mvn spring-boot:run
```

等待输出显示：
```
2025-10-18T14:05:31.623+08:00  INFO ... Tomcat started on port(s): 8081
```

### 第二步：启动前端开发服务器

在新的终端窗口中：
```bash
cd zhiyong-fronted
npm run dev
```

等待输出显示：
```
  VITE v5.4.19  ready in 87 ms
  ➜  Local:   http://localhost:8082/
```

### 第三步：访问管理员界面

1. 打开浏览器访问：`http://localhost:8082`
2. 登录管理员账户（如果需要）
3. 点击左侧菜单 "题库管理"

## ✅ 验证清单

### 后端 API 测试

在终端运行以下命令验证后端 API：

```bash
# 测试分页查询接口
curl "http://localhost:8081/api/questions/page?page=1&pageSize=5" | jq '.'

# 预期输出应包含：
# - code: 0 (成功)
# - data.total: 1146 (总题目数)
# - data.records: 数组，包含题目信息
```

### 前端功能测试

#### 1. 题目列表加载
- [ ] 打开题库管理页面
- [ ] 验证题目列表正常显示
- [ ] 验证显示 10 条题目（默认）

#### 2. 题目信息显示
- [ ] 验证题目 ID 显示正确
- [ ] 验证题目内容（题干）显示正确
- [ ] 验证题型标签显示（单选、多选、判断等）
- [ ] 验证难度标签显示（简单、中等、困难）
- [ ] 验证级别信息显示

#### 3. 分页功能
- [ ] 验证当前页码显示正确
- [ ] 验证总页数显示正确（应为 115 页）
- [ ] 验证总题目数显示正确（应为 1146）
- [ ] 点击"下一页"按钮，验证页面更新
- [ ] 点击"上一页"按钮，验证页面更新
- [ ] 验证第一页时"上一页"按钮禁用
- [ ] 验证最后一页时"下一页"按钮禁用

#### 4. 每页数量切换
- [ ] 选择"每页 20 条"
- [ ] 验证页面重新加载，显示 20 条题目
- [ ] 验证总页数更新为 58 页
- [ ] 选择"每页 50 条"
- [ ] 验证页面重新加载，显示 50 条题目
- [ ] 验证总页数更新为 23 页

#### 5. 加载状态
- [ ] 切换页面时，验证显示加载指示器
- [ ] 验证加载完成后指示器消失

#### 6. 错误处理
- [ ] 停止后端服务
- [ ] 刷新前端页面
- [ ] 验证显示错误提示信息

## 📊 测试数据

### 预期数据统计

| 指标 | 值 |
|------|-----|
| 总题目数 | 1146 |
| 总页数（每页10条） | 115 |
| 总页数（每页20条） | 58 |
| 总页数（每页50条） | 23 |

### 题型分布

| 题型 | 数量 |
|------|------|
| 单选题 (single) | 多数 |
| 判断题 (judge) | 部分 |
| 多选题 (multiple) | 部分 |
| 填空题 (fill) | 部分 |

### 难度分布

| 难度 | 数量 |
|------|------|
| 简单 (easy) | 部分 |
| 中等 (medium) | 部分 |
| 困难 (hard) | 部分 |

## 🔍 浏览器开发者工具检查

### 打开开发者工具
按 `F12` 或 `Ctrl+Shift+I` (Windows) / `Cmd+Option+I` (Mac)

### 检查网络请求
1. 点击 "Network" 标签
2. 刷新页面
3. 查找请求 `page?page=1&pageSize=10`
4. 验证：
   - 请求方法：GET
   - 状态码：200
   - 响应包含题目数据

### 检查控制台错误
1. 点击 "Console" 标签
2. 验证没有红色错误信息
3. 如有错误，记录错误信息用于调试

### 检查应用状态
1. 点击 "Application" 标签
2. 查看 "Local Storage" 中的数据
3. 验证是否有缓存的题目数据

## 🐛 常见问题排查

### 问题 1：题目列表为空
**症状：** 页面加载但没有显示任何题目

**排查步骤：**
1. 打开浏览器开发者工具 (F12)
2. 查看 Console 标签是否有错误
3. 查看 Network 标签中的 API 请求
4. 检查响应状态码是否为 200
5. 检查响应数据中 `records` 数组是否为空

**解决方案：**
- 确保后端服务正在运行
- 检查数据库中是否有题目数据
- 查看后端日志是否有异常

### 问题 2：分页按钮不工作
**症状：** 点击分页按钮没有反应

**排查步骤：**
1. 打开浏览器开发者工具
2. 查看 Network 标签，点击分页按钮
3. 验证是否发送了新的 API 请求
4. 检查请求参数是否正确

**解决方案：**
- 刷新页面重试
- 检查浏览器控制台是否有 JavaScript 错误
- 尝试使用不同的浏览器

### 问题 3：CORS 错误
**症状：** 浏览器控制台显示 CORS 相关错误

**排查步骤：**
1. 检查错误信息中的 URL
2. 验证后端是否允许跨域请求
3. 检查请求头是否正确

**解决方案：**
- 确保后端配置了 CORS 支持
- 检查后端 API 是否正确处理 OPTIONS 请求

## 📈 性能测试

### 加载时间测试
1. 打开浏览器开发者工具
2. 点击 "Performance" 标签
3. 点击"记录"按钮
4. 刷新页面
5. 等待页面加载完成
6. 停止记录
7. 查看加载时间统计

**预期结果：**
- 首次加载：< 2 秒
- 分页切换：< 500 毫秒

### 内存使用测试
1. 打开浏览器开发者工具
2. 点击 "Memory" 标签
3. 点击"拍摄堆快照"
4. 多次切换分页
5. 再次拍摄堆快照
6. 比较内存使用情况

**预期结果：**
- 内存使用稳定
- 没有明显的内存泄漏

## ✨ 成功标志

当以下条件都满足时，前后端对接成功：

- ✅ 后端服务正常运行
- ✅ 前端开发服务器正常运行
- ✅ 题目列表正常显示
- ✅ 分页功能正常工作
- ✅ 题目信息完整显示
- ✅ 没有控制台错误
- ✅ 网络请求状态码为 200

## 📞 获取帮助

如果测试失败，请：

1. 检查后端日志：
   ```bash
   cd zhiyong-backend
   tail -f logs/zhiyong-backend.log
   ```

2. 检查前端控制台错误（F12 → Console）

3. 查看 API 响应数据（F12 → Network）

4. 参考完整文档：`FRONTEND_INTEGRATION_GUIDE.md`

