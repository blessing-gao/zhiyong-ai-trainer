# 试卷预览功能 - 测试指南

## 🚀 快速开始

### 前置条件
1. 后端服务已启动（端口8081）
2. 前端开发服务已启动（端口5173）
3. 数据库已连接
4. 试卷数据已存在

### 启动步骤

#### 1. 启动后端服务
```bash
cd zhiyong-backend
mvn spring-boot:run
```

#### 2. 启动前端开发服务
```bash
cd zhiyong-fronted
npm run dev
```

#### 3. 访问应用
```
http://localhost:5173
```

## 📝 测试用例

### TC001: 打开预览对话框

**步骤**:
1. 登录管理员账户
2. 进入"试卷管理"模块
3. 在试卷列表中找到一份试卷
4. 点击操作列中的眼睛图标

**预期结果**:
- ✅ 预览对话框打开
- ✅ 显示加载动画
- ✅ 后端返回试卷详情
- ✅ 显示试卷基本信息

### TC002: 查看试卷基本信息

**步骤**:
1. 打开预览对话框
2. 查看试卷基本信息部分

**预期结果**:
- ✅ 显示试卷类型
- ✅ 显示试卷总分
- ✅ 显示及格分数
- ✅ 显示考试时长
- ✅ 显示试卷说明（如果有）

### TC003: 查看题型比例

**步骤**:
1. 打开预览对话框
2. 查看题型比例部分

**预期结果**:
- ✅ 显示判断题比例（蓝色）
- ✅ 显示单选题比例（绿色）
- ✅ 显示多选题比例（紫色）
- ✅ 比例数值正确

### TC004: 查看知识点比例

**步骤**:
1. 打开预览对话框
2. 查看知识点比例部分

**预期结果**:
- ✅ 显示所有知识点
- ✅ 显示每个知识点的比例
- ✅ 比例数值正确
- ✅ 网格布局正确

### TC005: 查看试卷题目

**步骤**:
1. 打开预览对话框
2. 滚动查看试卷题目部分

**预期结果**:
- ✅ 显示题目总数
- ✅ 显示每题的题号
- ✅ 显示每题的题型标签
- ✅ 显示每题的难度标签（如果有）

### TC006: 查看题目详情

**步骤**:
1. 打开预览对话框
2. 查看任意一题的详情

**预期结果**:
- ✅ 显示题干
- ✅ 显示选项（A、B、C、D等）
- ✅ 显示标准答案
- ✅ 显示题目解析（如果有）

### TC007: 关闭预览对话框

**步骤**:
1. 打开预览对话框
2. 点击"关闭"按钮或X按钮

**预期结果**:
- ✅ 对话框关闭
- ✅ 返回试卷列表
- ✅ 数据清空

### TC008: 预览多份试卷

**步骤**:
1. 打开第一份试卷的预览
2. 关闭预览
3. 打开第二份试卷的预览

**预期结果**:
- ✅ 第一份试卷的数据正确显示
- ✅ 关闭后数据清空
- ✅ 第二份试卷的数据正确显示
- ✅ 没有数据混淆

### TC009: 加载失败处理

**步骤**:
1. 后端服务停止
2. 点击预览按钮

**预期结果**:
- ✅ 显示加载动画
- ✅ 显示错误提示
- ✅ 错误信息清晰
- ✅ 可以关闭对话框

### TC010: 大量题目显示

**步骤**:
1. 打开包含大量题目的试卷预览
2. 滚动查看所有题目

**预期结果**:
- ✅ 所有题目都能显示
- ✅ 滚动流畅
- ✅ 没有性能问题
- ✅ 题目显示完整

## 🔍 调试技巧

### 查看浏览器控制台
```
F12 或 右键 -> 检查 -> Console
```

### 查看网络请求
```
F12 -> Network -> 查看API请求
```

### 查看后端日志
```
后端控制台输出API调用日志
```

## 📊 测试数据

### 标准试卷数据

```json
{
  "id": 1,
  "name": "高考数学模拟卷",
  "description": "2025年高考数学模拟卷",
  "type": "exam",
  "totalScore": 150,
  "passScore": 90,
  "duration": 120,
  "questionCount": 100,
  "typeRatio": "{\"judge\":20,\"single\":70,\"multiple\":10}",
  "knowledgeRatio": "{\"1\":20,\"2\":20,\"3\":20,\"4\":20,\"5\":20}",
  "questionsJson": "[1,2,3,4,5,...]",
  "status": 1
}
```

## ✅ 测试清单

- [ ] TC001: 打开预览对话框
- [ ] TC002: 查看试卷基本信息
- [ ] TC003: 查看题型比例
- [ ] TC004: 查看知识点比例
- [ ] TC005: 查看试卷题目
- [ ] TC006: 查看题目详情
- [ ] TC007: 关闭预览对话框
- [ ] TC008: 预览多份试卷
- [ ] TC009: 加载失败处理
- [ ] TC010: 大量题目显示

## 🐛 常见问题

### Q1: 预览对话框打开后没有显示数据

**原因**: 后端API返回错误或网络问题

**解决方案**:
1. 检查后端服务是否运行
2. 检查浏览器控制台错误信息
3. 检查网络请求状态

### Q2: 题目选项显示不正确

**原因**: 选项JSON格式解析失败

**解决方案**:
1. 检查数据库中的选项格式
2. 查看浏览器控制台错误
3. 检查JSON解析逻辑

### Q3: 预览对话框滚动卡顿

**原因**: 题目过多导致性能问题

**解决方案**:
1. 使用虚拟滚动优化
2. 分页加载题目
3. 减少DOM节点数量

### Q4: 知识点比例显示不完整

**原因**: 知识点过多导致网格溢出

**解决方案**:
1. 调整网格列数
2. 使用滚动容器
3. 缩小卡片尺寸

## 📈 性能测试

### 加载时间
- 打开预览对话框: < 2秒
- 加载试卷详情: < 1秒
- 加载所有题目: < 3秒

### 内存占用
- 打开预览: < 20MB增长
- 加载100题: < 50MB增长

### 网络请求
- 获取试卷详情: 1个请求
- 获取题目详情: N个请求（N=题目数）

## 🎯 验收标准

- [x] 预览按钮可点击
- [x] 对话框正确显示
- [x] 试卷信息完整
- [x] 题目显示正确
- [x] 加载状态显示
- [x] 错误处理完善
- [x] 前端编译成功

## 📝 测试报告模板

```
测试日期: 2025-10-18
测试人员: [姓名]
测试环境: 
  - 后端: 8081
  - 前端: 5173
  - 浏览器: Chrome 120

测试结果:
  - 总用例数: 10
  - 通过: 10
  - 失败: 0
  - 通过率: 100%

问题记录:
  - 无

建议:
  - 无
```

---

**测试完成时间**: 2025-10-18  
**版本**: 1.0  
**状态**: ✅ 完成

